---
import { Image } from "astro:assets";
import FormattedDate from "../../components/ui/FormattedDate.astro";
import AppPage from "../../layouts/AppPage.astro";
import Content from "../../layouts/Content.astro";
import {SITE_TITLE} from "@src/consts"

import { truncateDescription } from "@components/hooks/truncateDescription";
import { posts } from "@components/hooks/fetchPosts.ts";

---

<AppPage title={`${SITE_TITLE} - Návody, Články, Tvorba webu`}>
  <Content>   
    <ul class="w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {
        posts.map((post) => (
          <li class="w-full border border-primary_gray/40 p-4 rounded-2xl animate-in fade-in duration-1000">
            <a href={`/blog/${post.slug}/`} class="block">
              <div class="w-full h-72">
                <Image
                  format="avif"
                  quality="low"
                  width={1280}
                  height={720}
                  src={post.data.heroImage}
                  alt=""
                  class="mb-2 rounded-2xl w-full h-full object-cover"
                />
              </div>
              <article class="mt-5">
                <p class="text-center text-gray-400">
                  <FormattedDate date={post.data.pubDate} />
                </p>
                <h4 class="text-center text-xl">{post.data.title}</h4>
              </article>
              <hr class="w-full border-zinc-800 my-5" />
              <p class="text-gray-300">
                {truncateDescription(post.data.description, 200)}
              </p>
            </a>
          </li>
        ))
      }
    </ul>   
  </Content>
</AppPage>
